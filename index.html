<!DOCTYPE html>
<html>
<!--	Joey M. Pupel
			10/23/2014
			Project 3 	-->
	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
		<meta name="author" content="Joey M. Pupel" />
		<title>
			Spooky Scary Ghost House
		</title>
		<style>
			.title {font-weight: bold;}
			.description {font-style: italic;}
			.footer {color: purple; font-weight: bold;}
		</style>
		<script type="text/javascript">
			//Player's current position using coordinates
			//Starting room is (2,2)
			var northSouth = 2;
			var eastWest = 2;
			
			//Check if a player can go a certain direction
			var canGoNorth = true;
			var canGoSouth = true;
			var canGoEast = true;
			var canGoWest = true;
			
			//Check if a player has visited a room
			var room1_2 = false;
			var room2_1 = false;
			var room2_2 = false;
			var room2_3 = false;
			var room3_2 = false;
			
			//Player score
			var score = 0;
			
			function goDirection(goDirection){
				//finds what direction the player went and changes their room coordinates accordingly
				if (goDirection === "north") {
					northSouth = northSouth - 1;
					goDirection = "You went north."
					rooms();
				} else {
					if (goDirection === "east") {
						eastWest = eastWest + 1;
						goDirection = "You went east."
						rooms();
					} else {
						if (goDirection === "south") {
							northSouth = northSouth + 1;
							goDirection = "You went south."
							rooms();
						} else {
							if (goDirection === "west") {
								eastWest = eastWest - 1;
								goDirection = "You went west."
								rooms();
							} else {
								//Display this message if the game is broken somehow
								document.getElementById("taMain").value = "How'd you do that??? (You broke free, but you broke the game.)";
							}
						}
					}
				}
				document.getElementById("taMain").value = goDirection + "\n" + document.getElementById("taMain").value;
				document.getElementById("btnEast").disabled = !canGoEast;
				document.getElementById("btnNorth").disabled = !canGoNorth;
				document.getElementById("btnSouth").disabled = !canGoSouth;
				document.getElementById("btnWest").disabled = !canGoWest;
			}
			
			function rooms() {
				var message = "";
				if (eastWest === 1) {
					if (northSouth === 2){
						//room to the west of the center room (room1_2)
						message = "You stand in an empty room with a door to the east.";
						canGoNorth = false;
						canGoSouth = false;
						canGoWest = false;
						canGoEast = true;
						if (!room1_2) {
							room1_2 = true;
							score += 5
						}
					} else {
						//Display this message if the game is broken somehow
						message = "You float inside a wall. You broke it!";
					}
				} else {
					if (eastWest === 2) {
						if (northSouth === 1) {
							//room to the north of the center room (room2_1)
							message = "You stand in a room with a door to the south. There are mattresses piled up against the walls that block the windows.";
							canGoNorth = false;
							canGoSouth = true;
							canGoWest = false;
							canGoEast = false;
							if (!room2_1) {
								room2_1 = true;
								score += 5
							}
						} else {
							if (northSouth === 2) {
								//center room (room2_2)
								message = "You stand in a room with doors on all sides. There is a large chandelier hanging from the center of the room.";
								canGoNorth = true;
								canGoSouth = true;
								canGoWest = true;
								canGoEast = true;
								if (!room2_2) {
									room2_2 = true;
									score += 5;
								}
							} else {
								if (northSouth === 3) {
									//room to the south of the center room (room2_3)
									message = "You stand in a room with a door to the north. There is a train set on the ground but no trains can be seen.";
									canGoNorth = true;
									canGoSouth = false;
									canGoWest = false;
									canGoEast = false;
									if (!room2_3) {
										room2_3 = true;
										score += 5;
									}
								} else {
									//Display this message if the game is broken somehow
									message = "You float inside a wall. You broke it!";
								}
							}
						}
					} else {
						if (eastWest === 3) {
							if (northSouth === 2) {
								//room to the east of the center room (room3_2)
								message = "You stand in a room with a door to the west. There is a large mirror on the wall in front of you but it's too dirty to see any reflections.";
								canGoNorth = false;
								canGoSouth = false;
								canGoWest = true;
								canGoEast = false;
								if (!room3_2){
									room3_2 = true;
									score += 5;
								}
							} else {
								//Display this message if the game is broken somehow
								message = "You float inside a wall. You broke it!";
							}
						}
					}
				}
				//Adds the text from the room to the message box
				document.getElementById("taMain").value = message + "\n----------------------------------\n" + document.getElementById("taMain").value;
				//Changes the score
				document.getElementById("scoreBox").value = score;
			}
			
			function start() {
				//initializes the game
				rooms();
				document.getElementById("btnStart").disabled = true;
				document.getElementById("btnEast").disabled = !canGoEast;
				document.getElementById("btnNorth").disabled = !canGoNorth;
				document.getElementById("btnSouth").disabled = !canGoSouth;
				document.getElementById("btnWest").disabled = !canGoWest;
				document.getElementById("txtCommand").disabled = false;
				document.getElementById("btnGo").disabled = false;
			}
		</script>
	</head>
	<body>
		<h2>
			Spooky Scary Ghost House
		</h2>
		<textarea rows="10" cols="40" id="taMain"></textarea>
		<br>
		<input
			type="button"
			value="North"
			onclick="goDirection('north');"
			id="btnNorth"
			disabled />
		<input
			type="button"
			value="East"
			onclick="goDirection('east');"
			id="btnEast"
			disabled />
		<input
			type="button"
			value="South"
			onclick="goDirection('south');"
			id="btnSouth"
			disabled />
		<input
			type="button"
			value="West"
			onclick="goDirection('west');"
			id="btnWest"
			disabled />
		<input
			type="button"
			value="Start"
			onclick="start();"
			id="btnStart" />
		<br>
		Command:
		<input	type="text" 
				id = "txtCommand"
				name="txtCommand"
				onkeydown = "if (event.keyCode == 13) goDirection(document.getElementById('txtCommand').value);"
				disabled />
				
		<input	type="button"
				id = "btnGo"
				value="Go" 
				onclick="goDirection(document.getElementById('txtCommand').value);"
				disabled />
		<br>
		<br>
		Score:
		<textarea rows="1" cols="2" id="scoreBox" disabled>0</textarea>
		<br>
		<br>
		<br>
		<br>
		<br>
		<br>
		<a href="mailto:Joseph.Pupel1@marist.edu">
			E-mail Me!
		</a>
		<p class="footer">
			<a href="http://validator.w3.org/#validate_by_input">
				Validate as HTML5
			</a>
		</p>
	</body>
</html>